<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test BusinessSizeStep</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="src/styles/main.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <div class="min-h-screen p-4">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-2xl font-bold mb-6 text-center">Test BusinessSizeStep Integration</h1>
            
            <!-- Test container -->
            <div id="test-container" class="bg-white rounded-lg shadow-lg p-6">
                <!-- Form content will be inserted here -->
            </div>
            
            <!-- Test controls -->
            <div class="mt-6 text-center">
                <button id="test-restaurant" class="btn btn-primary mr-4">Test Restaurant</button>
                <button id="test-beauty" class="btn btn-secondary mr-4">Test Beauty</button>
                <button id="test-default" class="btn btn-outline">Test Default</button>
            </div>
            
            <!-- Debug info -->
            <div class="mt-6 bg-gray-100 p-4 rounded-lg">
                <h3 class="font-semibold mb-2">Debug Info:</h3>
                <div id="debug-info" class="text-sm text-gray-600"></div>
            </div>
        </div>
    </div>

    <!-- Load BusinessSizeStep -->
    <script src="src/components/BusinessSizeStep.js"></script>
    
    <script>
        // Test BusinessSizeStep integration
        document.addEventListener('DOMContentLoaded', function() {
            const testContainer = document.getElementById('test-container');
            const debugInfo = document.getElementById('debug-info');
            
            // Mock app data
            window.app = {
                formData: {
                    industry: {
                        key: 'restaurant',
                        title: '–†–µ—Å—Ç–æ—Ä–∞–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å'
                    }
                },
                analytics: {
                    trackEvent: function(eventName, params) {
                        console.log('üìä Analytics Event:', eventName, params);
                        updateDebugInfo('Analytics Event: ' + eventName);
                    }
                }
            };
            
            let currentStep = null;
            
            function updateDebugInfo(message) {
                const timestamp = new Date().toLocaleTimeString();
                debugInfo.innerHTML += `[${timestamp}] ${message}<br>`;
            }
            
            function testBusinessSizeStep(industryKey) {
                try {
                    // Cleanup previous instance
                    if (currentStep) {
                        currentStep.destroy();
                    }
                    
                    // Update industry
                    window.app.formData.industry.key = industryKey;
                    
                    // Create new BusinessSizeStep
                    currentStep = new BusinessSizeStep(testContainer, {
                        onSelect: (size) => {
                            updateDebugInfo('Size selected: ' + size.title);
                            console.log('Size selected:', size);
                        },
                        onNext: (data) => {
                            updateDebugInfo('Next clicked: ' + data.businessSize.title);
                            console.log('Next clicked:', data);
                        },
                        onBack: (data) => {
                            updateDebugInfo('Back clicked');
                            console.log('Back clicked:', data);
                        },
                        trackAnalytics: true
                    });
                    
                    updateDebugInfo('BusinessSizeStep created for industry: ' + industryKey);
                    
                } catch (error) {
                    updateDebugInfo('Error: ' + error.message);
                    console.error('Error creating BusinessSizeStep:', error);
                }
            }
            
            // Test buttons
            document.getElementById('test-restaurant').addEventListener('click', () => {
                testBusinessSizeStep('restaurant');
            });
            
            document.getElementById('test-beauty').addEventListener('click', () => {
                testBusinessSizeStep('beauty');
            });
            
            document.getElementById('test-default').addEventListener('click', () => {
                testBusinessSizeStep('default');
            });
            
            // Initialize with restaurant test
            updateDebugInfo('Page loaded, ready for testing');
            testBusinessSizeStep('restaurant');
        });
    </script>
</body>
</html> 